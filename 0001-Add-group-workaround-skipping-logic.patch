From 1b934c5f00801a38e7d1e8a1684767c897dac963 Mon Sep 17 00:00:00 2001
From: Scott K Logan <logans@cottsay.net>
Date: Wed, 3 Apr 2024 15:47:44 -0500
Subject: [PATCH] Add group workaround skipping logic

---
 package.xml | 23 +++++++++--------------
 1 file changed, 9 insertions(+), 14 deletions(-)

diff --git a/package.xml b/package.xml
index 09492acbfef1..49df3c4b6ca3 100644
--- a/package.xml
+++ b/package.xml
@@ -14,20 +14,15 @@
 
   <buildtool_depend>ament_cmake</buildtool_depend>
 
-  <!-- Bloom does not support group_depend, so this unrolls rosidl_runtime_packages -->
-  <build_export_depend>rosidl_runtime_c</build_export_depend>
-  <build_export_depend>rosidl_runtime_cpp</build_export_depend>
-  <build_export_depend>rosidl_generator_py</build_export_depend>
-
-  <!-- Bloom does not support group_depend, so this unrolls rosidl_typesupport_c_packages -->
-  <build_export_depend>rosidl_typesupport_c</build_export_depend>
-  <build_export_depend>rosidl_typesupport_fastrtps_c</build_export_depend>
-  <build_export_depend>rosidl_typesupport_introspection_c</build_export_depend>
-
-  <!-- Bloom does not support group_depend, so this unrolls rosidl_typesupport_cpp_packages -->
-  <build_export_depend>rosidl_typesupport_cpp</build_export_depend>
-  <build_export_depend>rosidl_typesupport_fastrtps_cpp</build_export_depend>
-  <build_export_depend>rosidl_typesupport_introspection_cpp</build_export_depend>
+  <build_export_depend condition="$DISABLE_GROUP_WORKAROUND != 1">rosidl_runtime_c</build_export_depend>
+  <build_export_depend condition="$DISABLE_GROUP_WORKAROUND != 1">rosidl_runtime_cpp</build_export_depend>
+  <build_export_depend condition="$DISABLE_GROUP_WORKAROUND != 1">rosidl_generator_py</build_export_depend>
+  <build_export_depend condition="$DISABLE_GROUP_WORKAROUND != 1">rosidl_typesupport_c</build_export_depend>
+  <build_export_depend condition="$DISABLE_GROUP_WORKAROUND != 1">rosidl_typesupport_fastrtps_c</build_export_depend>
+  <build_export_depend condition="$DISABLE_GROUP_WORKAROUND != 1">rosidl_typesupport_introspection_c</build_export_depend>
+  <build_export_depend condition="$DISABLE_GROUP_WORKAROUND != 1">rosidl_typesupport_cpp</build_export_depend>
+  <build_export_depend condition="$DISABLE_GROUP_WORKAROUND != 1">rosidl_typesupport_fastrtps_cpp</build_export_depend>
+  <build_export_depend condition="$DISABLE_GROUP_WORKAROUND != 1">rosidl_typesupport_introspection_cpp</build_export_depend>
 
   <test_depend>ament_lint_auto</test_depend>
   <test_depend>ament_lint_common</test_depend>
-- 
2.44.0

